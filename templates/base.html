<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>{{ title or "Flask Shop Template" }}</title>

	<!-- CSS -->
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" defer></script>

	<!-- JS -->
	<script src="{{ url_for('static', filename='js/script.js') }}" defer></script>
</head>

<body>
	<!-- HEADER -->
	<header>
		<!-- Navbar -->
		<nav>
			<!-- Brand -->
			<a href="{{ url_for('index') }}">Flask Shop Template</a>

			<!-- -->
			<ul>
				<li>
					<a href="{{ url_for('catalog') }}">Catalog</a>
				</li>
				{% if current_user.is_admin %}
				<li>
					<a href="{{ url_for('dashboard') }}">Dashboard</a>
				</li>
				{% endif %}
			</ul>

			<!-- -->
			<ul>
				{% if current_user.is_authenticated %}
				{% if current_user.is_admin %}
				<li>
					<img width="100" height="100" src="{{ url_for('static', filename='images/profile_pictures/' + current_user.profile_picture) }}" alt="Profile picture">
				</li>
				<li>
					<a href="{{ url_for('auth.profile') }}">{{ current_user.username }} (admin)</a>
				</li>
				<li>
					<a href="{{ url_for('auth.logout') }}">Logout</a>
				</li>
				{% else %}
				<li>
					<a href="{{ url_for('order_history') }}">Orders</a>
				</li>

				<li>
					<a href="{{ url_for('cart') }}">Cart</a>
				</li>

				<li>
					<img width="100" height="100" src="{{ url_for('static', filename='images/profile_pictures/' + current_user.profile_picture) }}" alt="Profile picture">
				</li>

				<li>
					<a href="{{ url_for('auth.profile') }}">{{ current_user.username }}</a>
				</li>

				<li>
					<a href="{{ url_for('auth.logout') }}">Logout</a>
				</li>
				{% endif %}
				{% else %}
				<li>
					<a href="{{ url_for('auth.login') }}">Login</a>
				</li>

				<li>
					<a href="{{ url_for('auth.register') }}">Register</a>
				</li>
				{% endif %}
			</ul>
		</nav>
	</header>

	<!-- MAIN -->
	<main>
		{% block content %}
		{% endblock %}

		<!-- Flash messages -->
		{% with messages = get_flashed_messages(with_categories=True) %}
		{% if messages %}
		<section>
			{% for category, message in messages %}
			<p class="{{ category }}">{{ message }}</p>
			{% endfor %}
		</section>
		{% endif %}
		{% endwith %}
	</main>

	<!-- FOOTER -->
	<footer>

	</footer>
</body>

</html>